
# ------ ALL SETTINGS ------

run --incompatible_disallow_dict_plus=false --python_top=//gen:python_runtime
build --incompatible_disallow_dict_plus=false --python_top=//gen:python_runtime
test --incompatible_disallow_dict_plus=false --python_top=//gen:python_runtime
coverage --incompatible_disallow_dict_plus=false --python_top=//gen:python_runtime

# ------ OPTIMIZATION ------

run:clang_eigen_optimal --copt="-march=native" --copt="-openmp" --copt="-O3"
build:clang_eigen_optimal --copt="-march=native" --copt="-openmp" --copt="-O3"

run:gcc_eigen_optimal --copt="-march=native" --copt="-fopenmp" --copt="-O3"
build:gcc_eigen_optimal --copt="-march=native" --copt="-fopenmp" --copt="-O3"

# ------ TEST SETTINGS ------

# === ALL TESTS ===

# show all test output, make failures verbose and never cache
test --test_output=all --verbose_failures --cache_test_results=no

# show all coverage outputs
coverage --test_output=all --verbose_failures
coverage --instrumentation_filter=

# === MEMORY ANALYSIS ===

test:valgrind --run_under="valgrind --leak-check=full"

test:asan --linkopt -fsanitize=address

# === GTESTS ===

test:gtest --action_env="GTEST_SHUFFLE=1" --action_env="GTEST_BREAK_ON_FAILURE=1"

coverage:gtest --action_env="GTEST_SHUFFLE=1" --action_env="GTEST_BREAK_ON_FAILURE=1"
